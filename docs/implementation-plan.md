# 구현 계획

## 목표
Claude Code의 터미널 중심 워크플로를 재현하면서, AI 호출은 분리된 API 서비스로 위임하는 VS Code 확장을 제공한다.

## 마일스톤
1. **스캐폴딩**
   - 확장 메타데이터, 명령, 빌드 도구, 문서를 초기화한다.
2. **핵심 경험**
   - 전용 터미널을 열고 AI 백엔드로 지시문을 전송하는 명령을 제공한다.
   - 터미널에서 AI 응답을 표시해 대화형 워크플로를 만든다.
3. **API 통합 고도화**
   - API 키 또는 VS Code 인증 세션을 통한 인증 요청을 지원한다.
   - 네트워크 실패·잘못된 설정에 대한 오류 처리를 추가한다.
4. **UX 향상**
   - 활성 세션과 요청 진행 상태를 나타내는 상태 표시줄 인디케이터를 추가한다.
   - 백엔드가 허용할 경우 스트리밍 응답을 지원한다.
   - 빠른 재실행, 출력 복사, 응답 링크에서 파일 열기 같은 퀵 액션을 제공한다.
5. **테스트와 패키징**
   - 명령 핸들러와 설정 파싱에 대한 단위 테스트를 추가한다.
   - `vsce` 또는 `@vscode/vsce`로 패키징 및 배포한다.

## 바로 다음 단계
- 헤더, 재시도, 스트리밍 훅을 감싸는 API 클라이언트 추상화를 다듬는다.
- API 실패와 사용자 메시지를 위한 텔레메트리 안전 로깅을 추가한다.
- 백엔드 팀과 `/instructions` 페이로드 및 스트리밍 프로토콜 계약을 정의한다.
- 명령 흐름에서 설정 검증과 친절한 오류 메시지를 구현한다.

## 열려 있는 질문
- 터미널이 셸 프롬프트를 모방해야 할까, 아니면 최소한으로 둘까?
- 지시문마다 워크스페이스 경로를 달리하는 멀티 워크스페이스를 지원해야 할까?
- 백엔드가 파일 수정 같은 구조화된 도구 호출을 지원할지, 순수 텍스트 출력만 지원할지?
